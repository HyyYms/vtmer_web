<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vtmer.mapper.LogMapper">

    <resultMap id="BaseResultMap" type="com.vtmer.domain.Log">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Aug 13 21:31:20 CST 2019.
        -->
        <result column="id" jdbcType="INTEGER" property="id"/>
        <result column="admi_id" jdbcType="INTEGER" property="admiId"/>
        <result column="user_id" jdbcType="INTEGER" property="userId"/>
        <result column="opreational_time" jdbcType="DATE" property="opreationalTime"/>
        <result column="operational_record" jdbcType="LONGVARCHAR" property="operationalContent"/>
    </resultMap>

    <!-- 添加操作记录 -->
    <insert id="insert" parameterType="com.vtmer.domain.Log">
        insert into log (admi_id, user_id, opreational_time,
        operational_record)
        values (#{admiId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{opreationalTime,jdbcType=DATE},
        #{operationalRecord,jdbcType=LONGVARCHAR})
    </insert>

    <!-- 查询所有操作记录 -->
    <select id="selectAll" resultMap="BaseResultMap">
        select id, admi_id, user_id, opreational_time, operational_record
        from log
    </select>

    <!-- 根据管理员id查看操作记录 -->
    <select id="selectLogByAdmiId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select log.id, log.admi_id, log.user_id, log.opreational_time, log.operational_record,
        administrator.username, administrator.group
        from log,administrator where admi_id = #{admiId}
    </select>

    <!-- 根据用户id查看被操作记录 -->
    <select id="selectLogByUserId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select log.id, log.admi_id, log.user_id, log.opreational_time, log.operational_record,
        user.user_name, user.user_first_volunteer, user.user_second_volunteer
        from log,user where user_id = #{userId}
    </select>

    <!-- 根据用户Id删除用户；记录删除操作 -->
    <insert id="insertDeleteUser" parameterType="java.lang.Integer">
        insert into log(admi_id, user_id, opreational_time,
        operational_record)
        values (#{admiId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{opreationalTime,jdbcType=DATE},
        'deleteUser')
    </insert>

    <!-- 根据用户Id移组用户；记录移组操作 -->
    <insert id="insertRemoveUser" parameterType="java.lang.Integer">
        insert into log(admi_id, user_id, opreational_time,
        operational_record)
        values (#{admiId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{opreationalTime,jdbcType=DATE},
        'removeUser')
    </insert>

    <!-- 根据用户Id添加面试评价；记录添加操作 -->
    <insert id="insertAddInterview" parameterType="java.lang.Integer">
        insert into log(admi_id, user_id, opreational_time,
        operational_record)
        values (#{admiId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{opreationalTime,jdbcType=DATE},
        'insertInterview')
    </insert>

    <!-- 根据用户Id修改面试评价；记录修改操作 -->
    <insert id="insertUpdateInterview" parameterType="java.lang.Integer">
        insert into log(admi_id, user_id, opreational_time,
        operational_record)
        values (#{admiId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{opreationalTime,jdbcType=DATE},
        'updateInterview')
    </insert>

    <!-- 根据用户Id删除面试评价；记录删除操作 -->
    <insert id="insertDeleteInterview" parameterType="java.lang.Integer">
        insert into log(admi_id, user_id, opreational_time,
        operational_record)
        values (#{admiId,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{opreationalTime,jdbcType=DATE},
        'deleteInterview')
    </insert>
</mapper>